---
title: 函数高级
categories:
  - 技术
tags:
  - JavaScript
  - 函数
date: 2023-07-26 09:56:43
---

---

1. 原型与原型链

   - 原型(prototype)

     - 函数的 prototype 属性
       - 每个函数都有一个 prototype 属性，它默认指向一个 Object 空对象（即称为：原型对象)
       - 原型对象中有一个 constructor ，它指向函数对象

   - 显式原型与隐式原型

     - 每个函数 function 都有一个 prototype，即显式原型(属性)
     - 每个实例对象都有一个 `__proto__`，可称为隐式原型（属性）
     - 对象的隐式原型的值为其对应构造函数的显示原型的值

   - 原型链

     - 访问一个对象的属性时：
       - 先在自身属性中查找，找到返回
       - 如果没有，再沿着 `__proto__` 这条链向上查找，找到返回
       - 如果最终没有找到，返回 undefined
     - 别名：隐式原型连
     - 作用：查找对象的属性（方法）
     - 原型继承
       - 构造函数的实例对象自动拥有构造函数原型对象的属性（方法）
       - 利用的就是原型链
     - 原型属性问题
       - 读取对象的属性值时，会自动到原型链中查找
       - 设置对象的属性值时，不会查找原型链，如果当前对象中没有此属性，直接添加此属性并设置值
       - 方法一般定义在原型中，属性一般通过构造函数定义在对象本身上

   - 探索 instanceof
     - 表达式：A instanceof B
     - 如果 B 函数的显示原型对象在 A 对象的原型链上，返回 true，否则返回 false

<!-- more -->

2. 执行上下文与执行上下文栈

   - 变量提升与函数提升

     - 变量声明提升
       - 通过 var 定义（声明）的变量，在定义语句之前就可以访问到
       - 值 undefined
     - 函数声明提升
       - 通过 function 声明的函数，在之前就可以直接调用
       - 值：函数定义（对象）
     - 变量提升和函数提升是如何产生的

   - 执行上下文

     - 代码分类

       - 全局代码
       - 函数（局部）代码

     - 全局执行上下文

       - 在执行全局代码前将 window 确定为全局执行上下文
       - 对全局数据进行预处理
         - var 定义的全局变量 ==> undefined，添加为 window 的属性
         - function 声明的全局函数 ==> 赋值（fun），添加为 window 的方法
         - this ==> 赋值（window）
       - 开始执行全局代码

     - 函数执行上下文
       - 在调用函数，准备执行函数体之前，创建对应的函数执行上下文对象
       - 对局部函数进行预处理
         - 形参变量 ==> 赋值（实参）==> 添加为执行上下文的属性
         - arguments ==> 赋值（实参列表），添加为执行上下文的属性
         - var 定义的局部变量 ==> undefined，添加为执行上下文的属性
         - function 声明的函数 ==> 赋值（fun)，添加为执行上下文的方法
         - this ==> 赋值（调用函数的对象）
       - 开始执行函数体代码

   - 执行上下文栈
     - 在全局代码执行前，JS 引擎就会创建一个栈来存储管理所有的执行上下文对象
     - 在全局执行上下文（window）确定后，将其添加到栈中（压栈）
     - 在函数执行上下文创建后，将其添加到栈中（压栈）
     - 在当前函数执行完后，将栈顶的对象移除（出栈）
     - 当所有的代码执行完后，栈中只剩下 window
